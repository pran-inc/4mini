<section class="slider-section">

  <div class="slider-header">
    <h2 class="slider-title">{{ title }}</h2>

    {% if kind == "vehicle" %}
      <a class="slider-link" href="{% url 'vehicle_list' %}">See all</a>
    {% elif kind == "post" %}
      <a class="slider-link" href="{% url 'post_list' %}">See all</a>
    {% elif kind == "event" %}
      <a class="slider-link" href="{% url 'event_list' %}">See all</a>
    {% endif %}
  </div>

  <div class="js-slider slider-wrap">
    <div class="js-track slider-track">

      {% for obj in items %}
        <div class="slider-item card">

          {% if kind == "vehicle" %}

            <a class="card-link" href="{% url 'vehicle_detail' obj.id %}">
              <div class="card-media">
                {% if obj.main_image %}
                  <img class="card-img" src="{{ obj.main_image.image.url }}" alt="">
                {% else %}
                  <div class="card-img card-img--placeholder"></div>
                {% endif %}
              </div>
            </a>

            <div class="card-body">
              <div class="card-title">
                <a class="card-title-link" href="{% url 'vehicle_detail' obj.id %}">
                  {{ obj.title }}
                </a>
              </div>

              <div class="card-subtitle">
                {{ obj.model.maker }} {{ obj.model.name }}
              </div>

              <div class="card-user">
                by
                <a href="{% url 'profile_detail' obj.owner.username %}"
                   class="card-user-link">
                  {{ obj.owner.username }}
                </a>
              </div>
              <div class="card-stats">
                <span class="card-stat">üëç {{ obj.like_count|default:0 }}</span>
              </div>

            </div>

          {% elif kind == "post" %}

            <a class="card-link" href="{% url 'post_detail' obj.id %}">
              <div class="card-media">
                {% if obj.main_image %}
                  <img class="card-img" src="{{ obj.main_image.image.url }}" alt="">
                {% else %}
                  <div class="card-img card-img--placeholder"></div>
                {% endif %}
              </div>
            </a>

            <div class="card-body">
              <div class="card-title">
                <a class="card-title-link" href="{% url 'post_detail' obj.id %}">
                  {{ obj.title }}
                </a>
              </div>

              <div class="card-user">
                by
                <a href="{% url 'profile_detail' obj.author.username %}"
                   class="card-user-link">
                  {{ obj.author.username }}
                </a>
              </div>
              <div class="card-stats">
                <span class="card-stat">üëç {{ obj.like_count|default:0 }}</span>
              </div>
            </div>

          {% elif kind == "event" %}

            <a class="card-link" href="{% url 'event_detail' obj.id %}">
              <div class="card-media">
                <div class="card-img card-img--placeholder slider-event-icon">
                  üéâ
                </div>
              </div>
            </a>

            <div class="card-body">
              <div class="card-title">
                <a class="card-title-link" href="{% url 'event_detail' obj.id %}">
                  {{ obj.title }}
                </a>
              </div>

              <div class="card-user">
                {% if obj.organizer_team %}
                  Team: {{ obj.organizer_team.name }}
                {% else %}
                  by
                  <a href="{% url 'profile_detail' obj.organizer.username %}"
                     class="card-user-link">
                    {{ obj.organizer.username }}
                  </a>
                {% endif %}
              </div>

            </div>

          {% endif %}

        </div>

      {% empty %}
        <div class="empty">No items.</div>
      {% endfor %}

    </div>
  </div>

</section>

<script>
(function(){
  document.querySelectorAll(".js-slider").forEach(slider => {
    const track = slider.querySelector(".js-track");
    if (!track) return;

    let dir = 1;
    const speed = 0.6;

    function tick(){
      track.scrollLeft += dir * speed;
      const max = track.scrollWidth - track.clientWidth;
      if (track.scrollLeft >= max - 1) dir = -1;
      if (track.scrollLeft <= 1) dir = 1;
      requestAnimationFrame(tick);
    }

    requestAnimationFrame(tick);
  });
})();
</script>
