{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}

<div class="page">

  <div class="page-header">
    <div>
      <h1 class="page-title">{{ post.title }}</h1>
      <p class="muted">
        by 
        <a href="{% url 'profile_detail' post.author.username %}">
          {{ post.author.username }}
        </a>
        {% if post.vehicle %}
          / {{ post.vehicle.title }}
        {% endif %}
      </p>
    </div>

    {% if user.is_authenticated and user.id == post.author_id %}
      <div class="page-actions">
        <a class="btn btn-ghost" href="{% url 'post_edit' post.id %}">Edit</a>
        <a class="btn btn-danger-ghost" href="{% url 'post_delete_confirm' post.id %}">Delete</a>
      </div>
    {% endif %}
  </div>

  <!-- Reaction -->
  <div class="reaction-row">
    <button class="btn btn-ghost js-react"
            data-reaction="like"
            data-app="{{ target.app_label }}"
            data-model="{{ target.model }}"
            data-object-id="{{ target.object_id }}"
            type="button"
            style="opacity:{% if user_like %}1.0{% else %}0.6{% endif %};">
      üëç „ÅÑ„ÅÑ„Å≠ <span class="js-count">{{ like_count }}</span>
    </button>

    <button class="btn btn-ghost js-react"
            data-reaction="favorite"
            data-app="{{ target.app_label }}"
            data-model="{{ target.model }}"
            data-object-id="{{ target.object_id }}"
            type="button"
            style="opacity:{% if user_fav %}1.0{% else %}0.6{% endif %};">
      ‚≠ê „ÅäÊ∞ó„Å´ÂÖ•„Çä <span class="js-count">{{ fav_count }}</span>
    </button>
  </div>

  <!-- Body -->
  <div class="section">
    <div class="description">
      {{ post.body|linebreaksbr }}
    </div>
  </div>

  <!-- Images -->
  {% if post.images.all %}
    <div class="section">
      <h2 class="section-title">Images</h2>
      <div class="image-grid">
        {% for img in post.images.all %}
          <img class="gallery-thumb"
               src="{{ img.image.url }}"
               alt="">
        {% endfor %}
      </div>
    </div>
  {% endif %}

</div>

{% endblock %}
