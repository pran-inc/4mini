{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<h1>{{ post.title }}</h1>
<p>by {{ post.author.username }} {% if post.vehicle %} / {{ post.vehicle.title }}{% endif %}</p>

<a href="{% url 'profile_detail' post.author.username %}">
  {{ post.author.username }}
</a>

{% if user.is_authenticated and user.id == post.author_id %}
  <p><a href="{% url 'post_edit' post.id %}">Edit post</a></p>
{% endif %}

<div>
  <button class="js-react" data-reaction="like"
          data-app="{{ target.app_label }}" data-model="{{ target.model }}" data-object-id="{{ target.object_id }}"
          type="button"
          style="opacity:{% if user_like %}1.0{% else %}0.6{% endif %};">
    üëç Like <span class="js-count">{{ like_count }}</span>
  </button>

  <button class="js-react" data-reaction="favorite"
          data-app="{{ target.app_label }}" data-model="{{ target.model }}" data-object-id="{{ target.object_id }}"
          type="button"
          style="opacity:{% if user_fav %}1.0{% else %}0.6{% endif %}; margin-left:10px;">
    ‚≠ê Favorite <span class="js-count">{{ fav_count }}</span>
  </button>
</div>

<div>{{ post.body|linebreaksbr }}</div>

<h2>Images</h2>
{% for img in post.images.all %}
  <img src="{{ img.image.url }}" width="240" alt="">
{% endfor %}

{% if user.is_authenticated and user.id == post.author_id %}
  <p>
    <a href="{% url 'post_edit' post.id %}">Edit</a>
    | <a href="{% url 'post_delete_confirm' post.id %}">Delete</a>
  </p>
{% endif %}

{% endblock %}
