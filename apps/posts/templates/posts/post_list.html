{% extends "base.html" %}
{% block title %}Posts{% endblock %}
{% block content %}

<h1>Posts</h1>

<ul style="
  list-style:none;
  padding:0;
  margin:0;
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap:16px;
">
  {% for post in posts %}
    <li style="border:1px solid #ddd; border-radius:14px; padding:12px; background:#fff;">
      <a href="{% url 'post_detail' post.id %}" style="text-decoration:none; color:inherit;">

        {% if post.main_image %}
          {% if post.main_image.thumb %}
            <img src="{{ post.main_image.thumb.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% else %}
            <img src="{{ post.main_image.image.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% endif %}
        {% else %}
          <div style="width:100%; height:160px; background:#eee; border-radius:12px;"></div>
        {% endif %}

        <div style="margin-top:10px;">
          <div class="post-card" style="font-weight:bold; font-size:16px;">
            {{ post.title }}
          </div>
          <p class="post-body">
            {{ post.body }}
          </p>
          <div style="opacity:0.8; font-size:13px;">
            {{ post.created_at }}
          </div>
        </div>

      </a>
    </li>
  {% empty %}
    <li>No posts yet.</li>
  {% endfor %}
</ul>

{% endblock %}
