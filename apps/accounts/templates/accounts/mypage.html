{% extends "base.html" %}
{% block title %}My Page{% endblock %}
{% block content %}

<h1>My Page</h1>

<!-- ===================== -->
<!-- My Vehicles -->
<!-- ===================== -->
<h2 style="margin-top:18px;">My Vehicles</h2>
<ul style="
  list-style:none; padding:0; margin:0;
  display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap:16px;
">
  {% for v in my_vehicles %}
    <li style="border:1px solid #ddd; border-radius:14px; padding:12px; background:#fff;">
      <a href="{% url 'vehicle_detail' v.id %}" style="text-decoration:none; color:inherit;">
        {% if v.main_image %}
          {% if v.main_image.thumb %}
            <img src="{{ v.main_image.thumb.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% else %}
            <img src="{{ v.main_image.image.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% endif %}
        {% else %}
          <div style="width:100%; height:160px; background:#eee; border-radius:12px;"></div>
        {% endif %}

        <div style="margin-top:10px;">
          <div style="font-weight:bold; font-size:16px;">{{ v.title }}</div>
          <div style="opacity:0.8; font-size:13px;">{{ v.model.maker }} {{ v.model.name }}</div>
        </div>
      </a>
    </li>
  {% empty %}
    <li style="opacity:0.7;">No vehicles yet.</li>
  {% endfor %}
</ul>

<!-- ===================== -->
<!-- My Posts -->
<!-- ===================== -->
<h2 style="margin-top:26px;">My Posts</h2>
<ul style="
  list-style:none; padding:0; margin:0;
  display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap:16px;
">
  {% for p in my_posts %}
    <li style="border:1px solid #ddd; border-radius:14px; padding:12px; background:#fff;">
      <a href="{% url 'post_detail' p.id %}" style="text-decoration:none; color:inherit;">
        {% if p.main_image %}
          {% if p.main_image.thumb %}
            <img src="{{ p.main_image.thumb.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% else %}
            <img src="{{ p.main_image.image.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% endif %}
        {% else %}
          <div style="width:100%; height:160px; background:#eee; border-radius:12px;"></div>
        {% endif %}

        <div style="margin-top:10px;">
          <div style="font-weight:bold; font-size:16px;">{{ p.title }}</div>
          <div style="opacity:0.8; font-size:13px;">{{ p.created_at }}</div>
        </div>
      </a>
    </li>
  {% empty %}
    <li style="opacity:0.7;">No posts yet.</li>
  {% endfor %}
</ul>

<!-- ===================== -->
<!-- Favorites -->
<!-- ===================== -->
<h2 style="margin-top:26px;">Favorites</h2>

<h3 style="margin-top:10px;">Favorite Vehicles</h3>
<ul style="
  list-style:none; padding:0; margin:0;
  display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap:16px;
">
  {% for v in favorite_vehicles %}
    <li style="border:1px solid #ddd; border-radius:14px; padding:12px; background:#fff;">
      <a href="{% url 'vehicle_detail' v.id %}" style="text-decoration:none; color:inherit;">
        {% if v.main_image %}
          {% if v.main_image.thumb %}
            <img src="{{ v.main_image.thumb.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% else %}
            <img src="{{ v.main_image.image.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% endif %}
        {% else %}
          <div style="width:100%; height:160px; background:#eee; border-radius:12px;"></div>
        {% endif %}

        <div style="margin-top:10px;">
          <div style="font-weight:bold; font-size:16px;">{{ v.title }}</div>
          <div style="opacity:0.8; font-size:13px;">{{ v.model.maker }} {{ v.model.name }}</div>
        </div>
      </a>
    </li>
  {% empty %}
    <li style="opacity:0.7;">No favorite vehicles yet.</li>
  {% endfor %}
</ul>

<h3 style="margin-top:18px;">Favorite Posts</h3>
<ul style="
  list-style:none; padding:0; margin:0;
  display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap:16px;
">
  {% for p in favorite_posts %}
    <li style="border:1px solid #ddd; border-radius:14px; padding:12px; background:#fff;">
      <a href="{% url 'post_detail' p.id %}" style="text-decoration:none; color:inherit;">
        {% if p.main_image %}
          {% if p.main_image.thumb %}
            <img src="{{ p.main_image.thumb.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% else %}
            <img src="{{ p.main_image.image.url }}" alt=""
                 style="width:100%; height:160px; object-fit:cover; border-radius:12px;">
          {% endif %}
        {% else %}
          <div style="width:100%; height:160px; background:#eee; border-radius:12px;"></div>
        {% endif %}

        <div style="margin-top:10px;">
          <div style="font-weight:bold; font-size:16px;">{{ p.title }}</div>
          <div style="opacity:0.8; font-size:13px;">{{ p.created_at }}</div>
        </div>
      </a>
    </li>
  {% empty %}
    <li style="opacity:0.7;">No favorite posts yet.</li>
  {% endfor %}
</ul>

{% endblock %}
