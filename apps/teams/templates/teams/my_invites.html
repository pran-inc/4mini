{% extends "base.html" %}
{% block title %}Team Invites{% endblock %}
{% block content %}

<h1>Team Invites</h1>

<p>
  <a href="{% url 'team_list' %}">Teams</a>
  {% if user.is_authenticated %}
    | <a href="{% url 'my_teams' %}">My Teams</a>
  {% endif %}
</p>

<hr>

{% if invites %}
  <ul style="list-style:none; padding:0;">
    {% for m in invites %}
      <li style="border:1px solid #ddd; padding:12px; border-radius:10px; margin-bottom:10px;">
        <div style="font-size:18px; font-weight:bold;">
          <a href="{% url 'team_detail' m.team.id %}">{{ m.team.name }}</a>
        </div>

        <div style="color:#666; margin-top:4px;">
          Owner: {{ m.team.owner.username }}
          {% if m.team.prefecture %} | {{ m.team.get_prefecture_display }}{% endif %}
        </div>

        {% if m.team.description %}
          <div style="margin-top:8px;">
            {{ m.team.description|truncatechars:140 }}
          </div>
        {% endif %}

        <div style="margin-top:10px;">
          <form method="post" action="{% url 'invite_accept' m.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit">Accept</button>
          </form>

          <form method="post" action="{% url 'invite_decline' m.id %}" style="display:inline; margin-left:8px;">
            {% csrf_token %}
            <button type="submit" onclick="return confirm('招待を辞退しますか？');">Decline</button>
          </form>
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>招待はありません。</p>
{% endif %}

{% endblock %}
