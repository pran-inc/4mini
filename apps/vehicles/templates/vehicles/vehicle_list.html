{% extends "base.html" %}
{% block title %}Vehicles{% endblock %}

{% block content %}
<h1>Vehicles</h1>

<ul style="
  list-style:none;
  padding:0;
  margin:0;
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap:16px;
">
  {% for v in vehicles %}
    <li style="
      border:1px solid #ddd;
      border-radius:14px;
      padding:12px;
      background:#fff;
    ">
      <a href="{% url 'vehicle_detail' v.id %}"
         style="text-decoration:none; color:inherit;">

        {% if v.images.all|length %}
          {% with img=v.images.all.0 %}
            {% if img.thumb %}
              <img src="{{ img.thumb.url }}"
                   alt=""
                   style="
                     width:100%;
                     height:160px;
                     object-fit:cover;
                     border-radius:12px;
                   ">
            {% else %}
              <img src="{{ img.image.url }}"
                   alt=""
                   style="
                     width:100%;
                     height:160px;
                     object-fit:cover;
                     border-radius:12px;
                   ">
            {% endif %}
          {% endwith %}
        {% else %}
          <div style="
            width:100%;
            height:160px;
            background:#eee;
            border-radius:12px;
          "></div>
        {% endif %}

        <div style="margin-top:10px;">
          <div style="font-weight:bold; font-size:16px;">
            {{ v.title }}
          </div>

          <div style="opacity:0.8; font-size:13px;">
            {{ v.model.maker }} {{ v.model.name }}
          </div>
        </div>
      </a>
    </li>
  {% empty %}
    <li>No vehicles yet.</li>
  {% endfor %}
</ul>

{% endblock %}
